<div class="dialog-container">
  <p>{{userAnimalData?.userData.name}}</p>
  <div class="m-btn-dialog-row d-flex">
    <p class="bold-text mr-3">{{userAnimalDialog.ownersPets}}</p>
    <div #animalsParent>
      <a class="mr-2" [class.link--active]="selectedLink?.id == animal.animalId && isActiveLink"
         *ngFor="let animal of userAnimalData?.userData.animals"
         id="{{animal.animalId}}" (click)="getAndSetAnimalData($event, animal.animalId)">{{animal.animalName}}</a>
    </div>
  </div>
  <div class="d-flex justify-content-between m-btn-dialog-row">
    <div class="pr-5 vet-border-right animal-data">
      <p class="underline-text">{{userAnimalDialog.name}}</p>
      <li class="list-style-type-none">{{userAnimalData?.animalData.name}}</li>
    </div>
    <div class="pr-5 vet-border-right animal-data">
      <p>{{userAnimalDialog.age}}</p>
      <li class="list-style-type-none">{{userAnimalData?.animalData.age}}</li>
    </div>
    <div class="pr-5 vet-border-right animal-data">
      <p>{{userAnimalDialog.weight}}</p>
      <li class="list-style-type-none">{{userAnimalData?.animalData.weight}}</li>
    </div>
    <div class="pr-5 vet-border-right animal-data">
      <p>{{userAnimalDialog.bloodType}}</p>
      <li class="list-style-type-none">{{userAnimalData?.animalData.bloodType}}</li>
    </div>
    <div class="pr-5 animal-data">
      <p>{{userAnimalDialog.birthDay}}</p>
      <li class="list-style-type-none">{{userAnimalData?.animalData.birthDay}}</li>
    </div>
  </div>
  <div class="m-btn-dialog-row">
    <div class="d-flex justify-content-between">
      <p class="bold-text">{{userAnimalDialog.animalDiseases}}</p>
      <div class="d-flex add-btn" (click)="showDiseaseInput()">
        <p>{{userAnimalDialog.addDisease}}</p>
        <span class="icon-plus px-2"></span>
      </div>
    </div>
    <div>
      <ul>
        <div *ngIf="isAddDiseaseEnabled" class="m-btn-small d-flex justify-content-between">
          <input [(ngModel)]="newDisease" class="form-control action-input" type="text"
                 [placeholder]="userAnimalDialog.editInputPlaceholder">
          <div>
            <span class="icon-check px-2 action-icon mr-2" (click)="addDisease()"></span>
            <span class="icon-close px-2 action-icon" (click)="hideDiseaseInput()"></span>
          </div>
        </div>
        <div>
          <div *ngFor="let disease of userAnimalData?.animalMedicalHistory.diseases"
               class="d-flex justify-content-between">
            <div class="dialog-list-container">
              <li #diseaseItem class="m-btn-small dialog-list-item">{{disease}}</li>
              <input #editInput [(ngModel)]="newDisease"
                     class="form-control action-input dialog-list-item m-btn-small hide" type="text"
                     [placeholder]="userAnimalDialog.editInputPlaceholder">
              <li class="hide list-style-type-none error-msg m-btn-small"
                  #errorElem>{{userAnimalDialogErrorTxt.noChangeDetected}}</li>
            </div>
            <div>
              <span class="icon-pencil px-2 action-icon" #editIcon
                    (click)="toggleEditInputAndListItem(true, editIcon, editInput, errorElem, checkIcon, closeInputIcon, diseaseItem)"></span>
              <span class="icon-check px-2 action-icon hide" #checkIcon
                    (click)="editDisease(editIcon, editInput, errorElem, checkIcon, closeInputIcon, diseaseItem)"></span>
              <span class="icon-close px-2 action-icon hide" #closeInputIcon
                    (click)="toggleEditInputAndListItem(false, editIcon, editInput, errorElem, checkIcon, closeInputIcon, diseaseItem)"></span>
            </div>
          </div>
        </div>
      </ul>
    </div>
  </div>
  <div class="m-btn-dialog-row">
    <div class="d-flex justify-content-between">
      <p class="bold-text">{{userAnimalDialog.medicalHistory}}</p>
      <div class="d-flex add-btn m-btn-small" (click)="showRecommendationInput()">
        <p>{{userAnimalDialog.addRecommendation}}</p>
        <span class="icon-plus px-2"></span>
      </div>
    </div>
    <ul>
      <div *ngIf="isAddRecEnabled" class="m-btn-small d-flex justify-content-between">
        <input [(ngModel)]="newRecommendation" class="form-control action-input" type="text"
               [placeholder]="userAnimalDialog.editInputPlaceholder">
        <div>
          <span class="icon-check px-2 action-icon mr-2" (click)="addRecommendation()"></span>
          <span class="icon-close px-2 action-icon" (click)="hideRecommendationInput()"></span>
        </div>
      </div>
      <div>
        <div *ngFor="let recommendation of userAnimalData?.animalMedicalHistory.recommendations"
             class="d-flex justify-content-between">
          <div class="dialog-list-container">
            <li #diseaseItem class="m-btn-small dialog-list-item">{{recommendation}}</li>
            <input #editInput [(ngModel)]="editedRecommendation"
                   class="form-control action-input dialog-list-item m-btn-small hide" type="text"
                   [placeholder]="userAnimalDialog.editInputPlaceholder">
            <li class="hide list-style-type-none error-msg m-btn-small"
                #errorElem>{{userAnimalDialogErrorTxt.noChangeDetected}}</li>
          </div>
          <div>
              <span class="icon-pencil px-2 action-icon" #editIcon
                    (click)="toggleEditInputAndListItem(true, editIcon, editInput, errorElem, checkIcon, closeInputIcon, diseaseItem)"></span>
            <span class="icon-check px-2 action-icon hide" #checkIcon
                  (click)="editRecommendations(editIcon, editInput, errorElem, checkIcon, closeInputIcon, diseaseItem)"></span>
            <span class="icon-close px-2 action-icon hide" #closeInputIcon
                  (click)="toggleEditInputAndListItem(false, editIcon, editInput, errorElem, checkIcon, closeInputIcon, diseaseItem)"></span>
          </div>
        </div>
      </div>

    </ul>
  </div>
  <div class="d-flex justify-content-center dialog-btn-container">
    <button class="btn btn-dark mr-3" (click)="addNewAppointment()">Adauga programare noua</button>
    <button class="btn btn-light close-btn" (click)="closeModal()">Close</button>
  </div>
</div>
